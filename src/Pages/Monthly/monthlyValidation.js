import { toast } from "react-toastify";

const SERVICE_AREA_ZIPCODES = [
  "11372",
  "11373",
  "11369",
  "11370",
  "11377",
  "11368",
  "11103",
  "11371",
  "11104",
  "11374",
  "11379",
  "11378",
  "11105",
  "11102",
  "11106",
  "11101",
  "11375",
  "11351",
  "11356",
  "11354",
  "11355",
  "11352",
  "11367",
  "11120",
  "11386",
  "10044",
  "11222",
  "10474",
  "11385",
  "10162",
  "11247",
  "11424",
  "11237",
  "10035",
  "11109",
  "10128",
  "10028",
  "11380",
  "11415",
  "10075",
  "10454",
  "10021",
  "10029",
  "10065",
  "11421",
  "11211",
  "10455",
  "10022",
  "11357",
  "11418",
  "10155",
  "10150",
  "10473",
  "11206",
  "11358",
  "10152",
  "11221",
  "10154",
  "10017",
  "11365",
  "10153",
  "10151",
  "10171",
  "10172",
  "10081",
  "10087",
  "10055",
  "10167",
  "10174",
  "10109",
  "10114",
  "10158",
  "10102",
  "10170",
  "10177",
  "10169",
  "10179",
  "11416",
  "10166",
  "10168",
  "10178",
  "10111",
  "10176",
  "10104",
  "10016",
  "10103",
  "10165",
  "10451",
  "10105",
  "10173",
  "11439",
  "10020",
  "10112",
  "11366",
  "10459",
  "10026",
  "11249",
  "10037",
  "11435",
  "10106",
  "10175",
  "10107",
  "10025",
  "10023",
  "10010",
  "11432",
  "11208",
  "10009",
  "11419",
  "10024",
  "10101",
  "10472",
  "10456",
  "11431",
  "11233",
  "10030",
  "11417",
  "10120",
  "11207",
  "10123",
  "10027",
  "10036",
  "10118",
  "10110",
  "10003",
  "10122",
  "11451",
  "10060",
  "11251",
  "10119",
  "11360",
  "10276",
  "11405",
  "11425",
  "11499",
  "10121",
  "10019",
  "10242",
  "10116",
  "11205",
  "10115",
  "10249",
  "10001",
  "11361",
  "11216",
  "10018",
  "10002",
  "10199",
  "10039",
  "10069",
  "10113",
  "11256",
  "11359",
  "11213",
  "10031",
  "10452",
  "11212",
  "11433",
  "11420",
  "10012",
  "10460",
  "10011",
  "10462",
  "11423",
  "10014",
  "11364",
  "10465",
  "10457",
  "11414",
  "10032",
  "11243",
  "11238",
  "10090",
  "10461",
  "10278",
  "07020",
  "11201",
  "11436",
  "10013",
  "07093",
  "10038",
  "11242",
  "11241",
  "11202",
  "10108",
  "10117",
  "10124",
  "10125",
  "10126",
  "10129",
  "10130",
  "10131",
  "10132",
  "10133",
  "10138",
  "10156",
  "10157",
  "10159",
  "10160",
  "10163",
  "10164",
  "10185",
  "10203",
  "10211",
  "10212",
  "10213",
  "10256",
  "10258",
  "10259",
  "10260",
  "10261",
  "10265",
  "10268",
  "10269",
  "10272",
  "10273",
  "10274",
  "10275",
  "10285",
  "10286",
  "10007",
  "11217",
  "11225",
  "07086",
  "10279",
  "11427",
  "11245",
  "10008",
  "10453",
  "11239",
  "10045",
  "10270",
  "07010",
  "10277",
  "10043",
  "10005",
  "10282",
  "10271",
  "11412",
  "11363",
  "10080",
  "10281",
  "10041",
  "10006",
  "10004",
  "11203",
  "10280",
  "11428",
  "10040",
  "11434",
  "07030",
  "07022",
  "11362",
  "11236",
  "07087",
  "10458",
  "11215",
  "11022",
  "10033",
  "07047",
  "11429",
  "07024",
  "07310",
  "11231",
  "07311",
  "10468",
  "11426",
  "10464",
  "11226",
  "10469",
  "10034",
  "11023",
  "11021",
  "11411",
  "07657",
  "10467",
  "07302",
  "11024",
  "07650",
  "11005",
  "11218",
  "10463",
  "10475",
  "07307",
  "11004",
  "11437",
  "11430",
  "11020",
  "11232",
  "11413",
  "07097",
  "11210",
  "11001",
  "11002",
  "07605",
  "07096",
  "11042",
  "07632",
  "07094",
  "07304",
  "07306",
  "10466",
  "11422",
  "11234",
  "11230",
  "10470",
  "11003",
  "07308",
  "07660",
  "11219",
  "07643",
  "11693",
  "10471",
  "07303",
  "07399",
  "07395",
  "11220",
  "11204",
  "11040",
  "07631",
  "11030",
  "11580",
  "11229",
  "07305",
  "11582",
  "10550",
  "07072",
  "07074",
  "11581",
  "10803",
  "11096",
  "10805",
  "10553",
  "10551",
  "10705",
  "07603",
  "11010",
  "11050",
  "11228",
  "07099",
  "07666",
  "07606",
  "11223",
  "11692",
  "07608",
  "11516",
  "11209",
  "07073",
  "10704",
  "07670",
  "11235",
  "07699",
  "11691",
  "11507",
  "10802",
  "11565",
  "10552",
  "11598",
  "07071",
  "11690",
  "11214",
  "11694",
  "07032",
  "10702",
  "11531",
  "10801",
  "07602",
  "11252",
  "11596",
  "07604",
  "11557",
  "07601",
  "07075",
  "11576",
  "11501",
  "11563",
  "11552",
  "07070",
  "11695",
  "07002",
  "11577",
  "07031",
  "11530",
  "11559",
  "11224",
  "10708",
  "07621",
  "10701",
  "07626",
  "07644",
  "11697",
  "07057",
  "11518",
  "11547",
  "11509",
  "07105",
  "07607",
  "07029",
  "11570",
  "11548",
  "11579",
  "10301",
  "11514",
  "11571",
  "11551",
  "11550",
  "10538",
  "10703",
  "07646",
  "07620",
  "07627",
  "07661",
  "07014",
  "07628",
  "10804",
  "10709",
  "07055",
  "10310",
  "10305",
  "11599",
  "07026",
  "07662",
  "11549",
  "07109",
  "10707",
  "07104",
  "10304",
  "10710",
  "07110",
  "11572",
  "07101",
  "07184",
  "07188",
  "07189",
  "07191",
  "07192",
  "07193",
  "07195",
  "07198",
  "07199",
  "07102",
  "07175",
  "07114",
  "07663",
  "07201",
  "11568",
  "11553",
  "11555",
  "11558",
  "10313",
  "07641",
  "10543",
  "07624",
  "10302",
  "11556",
  "11590",
  "11510",
  "11542",
  "07012",
  "07649",
  "07107",
  "11545",
  "07011",
  "07407",
  "11575",
  "07103",
  "07003",
  "07015",
  "10706",
  "07652",
  "07653",
  "07108",
  "07019",
  "11561",
  "07017",
  "10583",
  "10303",
  "07648",
  "11554",
  "11520",
  "07013",
  "07630",
  "07503",
  "07640",
  "07028",
  "07206",
  "07112",
  "07513",
  "07504",
  "07018",
  "11560",
  "07410",
  "07043",
  "10528",
  "07042",
  "10522",
  "10502",
  "10306",
  "11753",
  "07647",
  "11569",
  "10964",
  "10314",
  "11853",
  "07106",
  "07514",
  "07207",
  "11566",
  "07111",
  "07051",
  "10311",
  "10580",
  "07050",
  "07205",
  "07208",
  "11802",
  "07501",
  "07202",
  "10530",
  "11801",
  "11710",
  "07676",
  "10503",
  "07509",
  "07510",
  "07511",
  "07533",
  "07543",
  "07544",
  "07675",
  "07505",
  "07524",
  "10605",
  "07452",
  "10606",
  "11756",
  "11765",
  "10976",
  "10983",
  "11732",
  "11815",
  "07009",
  "07522",
  "07044",
  "10308",
  "07642",
  "07079",
  "07507",
  "07424",
  "07450",
  "07451",
  "07502",
  "10533",
  "10968",
  "07052",
  "11793",
  "10607",
  "11709",
  "07040",
  "07506",
  "10601",
  "07538",
  "11771",
  "10602",
  "10610",
  "07083",
  "11791",
  "07423",
  "11775",
  "07512",
  "11714",
  "11773",
  "07088",
  "07204",
  "07203",
  "11783",
  "07508",
  "07036",
  "10962",
  "07677",
  "10312",
  "07656",
  "07021",
  "07007",
  "11803",
  "10577",
  "10523",
  "07432",
  "10573",
  "07008",
  "10603",
  "07041",
  "07033",
  "07463",
  "11797",
  "11758",
  "07006",
  "10913",
  "11804",
  "10965",
  "10604",
  "07481",
  "07645",
  "07068",
  "11737",
  "10591",
  "07016",
  "07065",
  "10960",
  "06836",
  "07470",
  "07458",
  "10309",
  "11762",
  "07004",
  "07001",
  "07401",
  "07064",
  "07078",
  "07039",
  "11735",
  "07081",
  "10595",
  "11724",
  "07077",
  "07474",
  "06830",
  "10532",
  "07027",
  "10994",
  "07066",
  "10954",
  "07417",
  "07732",
  "07758",
  "07734",
  "11747",
  "07902",
  "06878",
  "11701",
  "07035",
  "07091",
  "07999",
  "07067",
  "07090",
  "07718",
  "10307",
  "07901",
  "07737",
  "07446",
  "07058",
  "07095",
  "06870",
  "07092",
  "06831",
  "07440",
  "07752",
  "10989",
  "07716",
  "10594",
  "07936",
  "08830",
  "11743",
  "08861",
  "11726",
  "06910",
  "06807",
  "08862",
  "10570",
  "07076",
  "10977",
  "07436",
  "07444",
  "08863",
  "11798",
  "11757",
  "11760",
  "07082",
  "10510",
  "11704",
  "07760",
  "07735",
  "07932",
  "07748",
  "07442",
  "07430",
  "10982",
  "10504",
  "07730",
  "07928",
  "10952",
  "07034",
  "07023",
  "06904",
  "06911",
  "06912",
  "06913",
  "06914",
  "06926",
  "06927",
  "07974",
  "11746",
  "06901",
  "06902",
  "07045",
  "07457",
  "08832",
  "07799",
  "07940",
  "08820",
  "10920",
  "07054",
  "10545",
  "07704",
  "08840",
  "11740",
  "07495",
  "07062",
  "10956",
  "08879",
  "07721",
  "11721",
  "07922",
  "07981",
  "07061",
  "11702",
  "06906",
  "07420",
  "07701",
  "06905",
  "10901",
  "11703",
  "07961",
  "08837",
  "11729",
  "07750",
  "11707",
  "07465",
  "10514",
  "07935",
  "10931",
  "07739",
  "08859",
  "07060",
  "07733",
  "07069",
  "10562",
  "07927",
  "07747",
  "07080",
  "07403",
  "06907",
  "08818",
  "11731",
  "07405",
  "06820",
  "10927",
  "07046",
  "07702",
  "11795",
  "11768",
  "07005",
  "07703",
  "07757",
  "10546",
  "07738",
  "06903",
  "07063",
  "07933",
  "07976",
  "08817",
  "07962",
  "07963",
  "10974",
  "10520",
  "10923",
  "08872",
  "06853",
  "10993",
  "07960",
  "11725",
  "10970",
  "07740",
  "10549",
  "08871",
  "08855",
  "07980",
  "07878",
  "10984",
  "08899",
  "07456",
  "07950",
  "11706",
  "11718",
  "07764",
  "10506",
  "07946",
  "07834",
  "11717",
  "08812",
  "07724",
  "06854",
  "08904",
  "08882",
  "08854",
  "10521",
  "07751",
  "07765",
  "08857",
  "07059",
  "10548",
  "10507",
  "08901",
  "07755",
  "11754",
  "08846",
  "07480",
  "06840",
  "06850",
  "08906",
  "10596",
  "07866",
  "06855",
  "08903",
  "08933",
  "08989",
  "11751",
  "10980",
  "07723",
  "07722",
  "06852",
  "06856",
  "06857",
  "06858",
  "06860",
  "08816",
  "10511",
  "11788",
  "10576",
  "07842",
  "07939",
  "11722",
  "07712",
  "07926",
  "07920",
  "07711",
  "10975",
  "11787",
  "07746",
  "08850",
  "07801",
  "08805",
  "07970",
  "08805",
  "06851",
  "08880",
  "08836",
  "07802",
  "10987",
  "07938",
  "11752",
  "10566",
  "10986",
  "10567",
  "10536",
  "07435",
  "07869",
  "07924",
  "10598",
  "11749",
  "07945",
  "11730",
  "10979",
  "07421",
  "07806",
  "10517",
  "07756",
  "08873",
  "11780",
  "10501",
  "08902",
  "11739",
  "07753",
  "08828",
  "06881",
  "06888",
  "06889",
  "10925",
  "10518",
  "07803",
  "07720",
  "07438",
  "07885",
  "06880",
  "10910",
  "07754",
  "10547",
  "10911",
  "11770",
  "10590",
  "06897",
  "11767",
  "06838",
  "07845",
  "08890",
  "07717",
  "10526",
  "11769",
  "11716",
  "08835",
  "10527",
  "07847",
  "08807",
  "10588",
  "10587",
  "10589",
  "11779",
  "07715",
  "07978",
  "07977",
  "10597",
  "07763",
  "08831",
  "10537",
  "10926",
  "10578",
  "08875",
  "10928",
  "11755",
  "10535",
  "07460",
  "10922",
  "07849",
  "10540",
  "11796",
  "07856",
  "07876",
  "11790",
  "10912",
  "07727",
  "11794",
  "06890",
  "07726",
  "10505",
  "08869",
  "08810",
  "10917",
  "07719",
  "06879",
  "07852",
  "07710",
  "07930",
  "06883",
  "07837",
  "08823",
  "06829",
  "11782",
  "08824",
  "07728",
  "07934",
  "07422",
  "07762",
  "11733",
  "10519",
  "07850",
  "07921",
  "11720",
  "10950",
  "10560",
  "07931",
  "06824",
  "11741",
  "08852",
  "07843",
  "10949",
  "10990",
  "10542",
  "11705",
  "10524",
  "07836",
  "10959",
  "06877",
  "07871",
  "08750",
  "07439",
  "10541",
  "08720",
  "08876",
  "10930",
  "07857",
  "11742",
  "07462",
  "00501",
  "00544",
  "07979",
  "07731",
  "11738",
  "07428",
  "10997",
  "11715",
  "10981",
  "07416",
  "10996",
  "08736",
  "08821",
  "06605",
  "08858",
  "11777",
  "10579",
  "11784",
  "08512",
  "06825",
  "11776",
  "07419",
  "07874",
  "06601",
  "06673",
  "06699",
  "08844",
  "08730",
  "10918",
  "08502",
  "06896",
  "07418",
  "10953",
  "08888",
  "06604",
  "06875",
  "06602",
  "08528",
  "06828",
  "10921",
  "12518",
  "07828",
  "11772",
  "08553",
  "08870",
  "08724",
  "08535",
  "11727",
  "08536",
  "06612",
  "06606",
  "08742",
  "11766",
  "08889",
  "06608",
  "08853",
  "06607",
  "11763",
  "10512",
  "06876",
  "12520",
  "07821",
  "08520",
  "10516",
  "12577",
  "07830",
  "07848",
  "07853",
  "06810",
  "08540",
  "10914",
  "08555",
  "10509",
  "08510",
  "06610",
  "06615",
  "08558",
  "10969",
  "07870",
  "11764",
  "12553",
  "08542",
  "10992",
  "08504",
  "11713",
  "08541",
  "08543",
  "12584",
  "08544",
  "11953",
  "11789",
  "08833",
  "06813",
  "07840",
  "08887",
  "06611",
  "07820",
  "08701",
  "10924",
];

export const validateZipcode = (zipcode) => {
  if (!zipcode || zipcode.trim() === "") {
    return { isValid: false, error: "Please enter your zip code." };
  }

  // Remove any formatting and get just the 5-digit zip
  const cleanZip = zipcode.replace(/\D/g, "").slice(0, 5);

  if (cleanZip.length !== 5) {
    return { isValid: false, error: "Please enter a valid 5-digit zip code." };
  }

  if (!SERVICE_AREA_ZIPCODES.includes(cleanZip)) {
    return {
      isValid: false,
      error: "Sorry, we don't currently service your area. We serve NYC, majority of Long Island, and parts of New Jersey and Connecticut."
    };
  }

  return { isValid: true, error: null };
};

export const validateMonthlyFields = (
  name,
  address,
  zip,
  phone,
  email,
  selectedDate,
  selectedTime,
  confirmedInteriorPackage,
  confirmedExteriorPackage
) => {
  // Check if name is filled
  if (!name || name.trim() === "") {
    toast.error("Please enter your name.");
    return false;
  }

  // Check if address is filled
  if (!address || address.trim() === "") {
    toast.error("Please enter your address.");
    return false;
  }

  // Check if zip code is filled
  if (!zip || zip.trim() === "") {
    toast.error("Please enter your zip code.");
    return false;
  }

  // Validate zip code format
  const zipPattern = /^\d{5}(-\d{4})?$/;
  if (!zipPattern.test(zip)) {
    toast.error("Please provide a valid zip code (e.g., 12345 or 12345-6789).");
    return false;
  }

  // Check if phone number is filled
  if (!phone || phone.trim() === "") {
    toast.error("Please enter your phone number.");
    return false;
  }

  // Validate phone number format
  const phonePattern = /^\(?\d{3}\)?[-.\s]?\d{3}[-.\s]?\d{4}$/;
  if (!phonePattern.test(phone)) {
    toast.error("Please enter a valid phone number.");
    return false;
  }

  // Check if email is filled
  if (!email || email.trim() === "") {
    toast.error("Please enter your email address.");
    return false;
  }

  // Validate email format
  const emailPattern = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;
  if (!emailPattern.test(email)) {
    toast.error("Please enter a valid email address.");
    return false;
  }

  // Validate service selection
  if (!confirmedInteriorPackage && !confirmedExteriorPackage) {
    toast.error("Please select at least one service package.");
    return false;
  }

  // Validate date selection
  if (!selectedDate) {
    toast.error("Please select an appointment date.");
    return false;
  }

  // Validate time selection
  if (!selectedTime) {
    toast.error("Please select an appointment time.");
    return false;
  }

  return true;
};

export const formatPhoneNumber = (value) => {
  // Remove all non-digit characters
  const phoneNumber = value.replace(/\D/g, "");

  // Format as (XXX) XXX-XXXX
  if (phoneNumber.length >= 6) {
    return `(${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(
      3,
      6
    )}-${phoneNumber.slice(6, 10)}`;
  } else if (phoneNumber.length >= 3) {
    return `(${phoneNumber.slice(0, 3)}) ${phoneNumber.slice(3)}`;
  } else {
    return phoneNumber;
  }
};

export const formatZipCode = (value) => {
  // Remove all non-digit characters except hyphens
  const zipCode = value.replace(/[^\d-]/g, "");

  // Limit to 10 characters (12345-6789 format)
  if (zipCode.length > 10) {
    return zipCode.slice(0, 10);
  }

  return zipCode;
};
